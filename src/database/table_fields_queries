/*Table profile*/

CREATE TABLE profile(id INT PRIMARY KEY);

ALTER TABLE profile
ADD COLUMN firstName VARCHAR(45) NOT NULL,
ADD COLUMN lastName VARCHAR(45) NOT NULL,
ADD COLUMN phoneNum INT NOT NULL,
ADD COLUMN email VARCHAR(45) NOT NULL,
ADD COLUMN pswd VARCHAR(45) NOT NULL,
ADD COLUMN shippingAddress VARCHAR(45) NULL,
ADD COLUMN promoApplied BOOLEAN NULL;
ADD COLUMN paymentMethodID INT,
ADD CONSTRAINT fk_profile_paymentMethod
    FOREIGN KEY (paymentMethodID)
    REFERENCES paymentMethod (paymentMethodID);

/*Table paymentMethod*/

CREATE TABLE paymentMethod(paymentMethodID INT PRIMARY KEY);

ALTER TABLE paymentMethod
ADD COLUMN type VARCHAR(45) NOT NULL,
ADD COLUMN cardNumber INT NOT NULL,
ADD COLUMN expirationDate INT NOT NULL,
ADD COLUMN name VARCHAR(45) NOT NULL;

/*Table orders*/

CREATE TABLE orders(confirmationNum INT PRIMARY KEY);

ALTER TABLE orders
ADD COLUMN customerID INT NOT NULL,
ADD COLUMN cart VARCHAR(45) NOT NULL,
ADD COLUMN paymentMethodID INT,
ADD CONSTRAINT fk_orders_paymentMethod
    FOREIGN KEY (paymentMethodID)
    REFERENCES paymentMethod (paymentMethodID);

/*Table promotion*/

CREATE TABLE promotion(promoCode INT PRIMARY KEY);

ALTER TABLE promotion
ADD COLUMN promoPrice DOUBLE NOT NULL,
ADD COLUMN expirationDate VARCHAR(45) NOT NULL;

/*Table shoppingCart*/

CREATE TABLE shoppingCart(shoppingCartID INT PRIMARY KEY);

ALTER TABLE shoppingCart
ADD COLUMN isbn INT NULL,
ADD COLUMN confirmationNum INT,
ADD CONSTRAINT fk_shoppingCart_orders
    FOREIGN KEY (confirmationNum)
    REFERENCES orders (confirmationNum);

/*Table book*/

CREATE TABLE book(isbn INT PRIMARY KEY);

ALTER TABLE book
ADD COLUMN category VARCHAR(45) NOT NULL,
ADD COLUMN authorName VARCHAR(45) NOT NULL,
ADD COLUMN title VARCHAR(45) NOT NULL,
ADD COLUMN coverPicture BLOB NOT NULL,
ADD COLUMN edition INT NOT NULL,
ADD COLUMN publisher VARCHAR(45) NOT NULL,
ADD COLUMN publicationYear INT NOT NULL,
ADD COLUMN quantityInStock INT NOT NULL,
ADD COLUMN minThreshold INT NOT NULL,
ADD COLUMN buyingPrice INT NOT NULL,
ADD COLUMN sellingPrice INT NOT NULL,
ADD COLUMN bookRating INT NOT NULL;

/*Table userType*/

CREATE TABLE userType(userType INT PRIMARY KEY);

/*Table registeredUser*/

CREATE TABLE registeredUser(accountID INT PRIMARY KEY);

ALTER TABLE registeredUser
ADD COLUMN profileID INT,
ADD COLUMN status BOOLEAN NOT NULL,
ADD COLUMN shoppingCartID INT,
ADD COLUMN orderConfirmationNum INT,
ADD COLUMN userType INT,
ADD CONSTRAINT fk_registeredUser_profile
    FOREIGN KEY (profileID)
    REFERENCES profile (id),
ADD CONSTRAINT fk_registeredUser_shoppingCart
    FOREIGN KEY (shoppingCartID)
    REFERENCES shoppingCart (shoppingCartID),
ADD CONSTRAINT fk_registeredUser_orders
    FOREIGN KEY (orderConfirmationNum)
    REFERENCES orders (confirmationNum),
ADD CONSTRAINT fk_registeredUser_userType
    FOREIGN KEY (userType)
    REFERENCES userType (userType);



